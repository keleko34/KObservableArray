var KObservableArray=function(){var w=function(){return function(w,x,B){function l(a,e,c,d,C,b){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=e;this.arguments=b;this.type=c;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=d;this.oldValue=C}function g(a,e,c,d){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=
!0};this.type=a;this.key=e;this.event=c;this.args=d}function y(a,e){var c=p[e];return function(d,e){var b=new l(this,d,a,this[d],this[d],arguments),b=new g(a,d,b,arguments),n;!0!==f(b)&&(q(c)&&void 0===c[b.key]&&(c[b.key]=[]),n=q(c)?c[b.key]:c,n.push(b.args[1]));return this}}function z(a,e){var c=p[e];return function(d,e){var b=new l(this,d,a,this[d],this[d],arguments),b=new g(a,d,b,arguments),n;if(!0!==f(b)){void 0!==b.args[1]&&(n=q(c)?c[b.key]:c);for(var h=0,k=n.length;h<k;h++)if(n[h].toString()===
b.args[1].toString()){n.splice(h,1);break}}return this}}function q(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function A(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}function D(a,e,c){return{get:function(){return a[e]},set:function(c){a[e]=c},enumerable:c.enumerable,configurable:c.configurable}}function b(a,e,c){return{value:a,writable:!!e,enumerable:!1,configurable:!!c}}function v(a,e){var c=a,d=a,b=function(a,e){d=c;c=a;e.listener=
"__kbupdatelisteners";e.type="update";h(e)};return{get:function(){return c},set:function(a,f){var g=new l(this,e,"set",a,c,arguments,"__kblisteners");f?b(a,g):!0!==h(g)&&(b(a,g),this.callSubscribers(e,c,d))},configurable:!0,enumerable:!0}}var p=[],k={},r={splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],addDataListener:[],
removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},f=function(a){for(var e=0,c=r[a.type],d=c.length;e!==d&&(c[e](a),!a._stopPropogration);e++);return a._preventDefault},h=function(a){var e=a.local[a.listener];q(e)&&(e=e[a.key]);if(A(e))for(var c=0,d=e.length;c!==d&&(e[c](a),!a._stopPropogration);c++);return a._preventDefault};Object.defineProperties(p,{__kbname:b(w||"",
!0,!0),__kbref:b(x?x.__kbref||x:p,!0,!0),__kbscopeString:b(B||"",!0,!0),__kbImmediateParent:b(x||null,!0,!0),splice:b(function(a,e,c){var d=new l(this,a,"splice",this[a],void 0,arguments,"__kbdatadeletelisteners"),b=new g("splice",a,d,arguments);if(!0!==f(b)){var k=[],n=A(b.args[2]),p=void 0!==b.args[2]?n?b.args[2].length:1:0,u=0;if(0!==e&&void 0!==this[b.key-1+b.args[1]]){for(var t=0,q=b.args[1];t<q;t++)if(u=b.key+t,d.key=u,d.type="remove",d.value=this[u],!0!==h(d)){k.push(this[u-k.length]);for(var m=
b.key,r=this.length-1;m<r;m++)this[m]=this[m+1]}else--b.args[1];this.length-=b.args[1]}if(0!==p)for(n||(b.args[2]=[b.args[2]]),t=0,q=p;t<q;t++)if(u=b.key+t,d.key=u,d.type="add",d.listener="__kbdatacreatelisteners",d.value=b.args[2][t],!0!==h(d)){m=this.length;for(r=u;m>r;m--)void 0===this[m]?Object.defineProperty(this,m,v.call(this,this[m-1],m)):this[m]=this[m-1];this[u]=b.args[2][t]}b.type="postsplice";f(b)}return k}),push:b(function(a){var e=new l(this,this.length,"push",a,void 0,arguments,"__kbdatacreatelisteners"),
c=new g("push",this.length,e,arguments);!0!==f(c)&&(e.type="add",e.value=c.args[0],e.key=c.key,!0!==h(e)&&(Object.defineProperty(this,c.key,v.call(this,c.args[0],c.key)),c.type="postpush",f(c)));return this.length}),pop:b(function(){var a=new l(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbdatadeletelisteners"),e=new g("pop",this.length-1,a,arguments);if(!0!==f(e)){var c=this[this.length-1];a.type="remove";if(!0!==h(a))return--this.length,e.type="postpop",f(e),c}return null}),
shift:b(function(){var a=new l(this,0,"shift",this[0],void 0,arguments,"__kbdatadeletelisteners"),e=new g("shift",0,a,arguments);if(!0!==f(e)){var c=this[e.key];a.type="remove";a.key=e.key;if(!0!==h(a)){for(var a=e.key,d=this.length-1;a<d;a++)this[a]=this[a+1];--this.length;e.type="postshift";f(e);return c}}return null}),unshift:b(function(){var a=new l(this,0,"unshift",this[0],void 0,arguments,"__kbdatacreatelisteners"),e=new g("unshift",0,a,arguments);if(!0!==f(e)){for(var c=Array.prototype.slice.call(e.args),
d=0,b=c.length;d<b;d++)a.key=d,a.type="add",a.value=c[d],!0===h(a)&&c.splice(d,1);if(0!==c.length){d=this.length-1+c.length;for(b=c.length;-1!==d;d--)d<b?this[d]=c[d]:void 0!==Object.getOwnPropertyDescriptor(this,d).value?Object.defineProperty(this,d,v.call(this,this[d-c.length],d)):this[d]=this[d-c.length];e.type="postunshift";f(e)}}return this.length}),fill:b(function(a,e,c){var d=void 0!==e?Math.max(0,e):0,b=new l(this,d,"fill",a,this[d],arguments,"__kbdatalisteners"),d=new g("fill",d,b,arguments);
if(!0!==f(d)){for(b=d.key;b<d.args[2];b++)this[b]=d.args[0];d.type="postfill";f(d)}return this}),reverse:b(function(){var a=new l(this,0,"reverse",value,this[_start],arguments,"__kbdatalisteners"),a=new g("reverse",0,a,arguments);if(!0!==f(a)){for(var e=this.slice().reverse(),c=0,d=this.length;c<d;c++)this[c]=e[c];a.type="postreverse";f(a)}return this}),sort:b(function(){var a=new l(this,0,"sort",value,this[_start],arguments,"__kbdatalisteners"),a=new g("sort",0,a,arguments);if(!0!==f(a)){for(var e=
this.slice(),e=e.sort.apply(e,arguments),c=0,d=this.length;c<d;c++)this[c]=e[c];a.type="postsort";f(a)}return this}),add:b(function(a,e){var c=new l(this,e,"add",a,void 0,arguments,"__kbdatacreatelisteners"),d=new g("add",e,c,arguments);void 0===e?this.push(a):!0!==f(d)&&(void 0===this[d.key]?!0!==h(c)&&(Object.defineProperty(this,d.key,v.call(this,d.args[0],d.key)),d.type="postadd",f(d)):console.error("Your attempting to add the index: ",d.key," that already exists on",this,"try using set or direct set instead"));
return this}),prototype:b(function(a,e){void 0===this[a]?Object.defineProperty(this.__proto__,a,b(e,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),addPointer:b(function(a,e,c){var d=new l(this,c||e,"add",a[e],void 0,arguments,"__kbdatacreatelisteners"),b=new g("add",c||e,d,arguments);!0!==f(b)&&!0!==h(d)&&(d=Object.getOwnPropertyDescriptor(a,e),Object.defineProperty(this,b.key,D(a,e,d)),b.type="postadd",f(b));return this}),set:b(function(a,
e,c){var d=new l(this,a,"set",e,this[a],arguments,"__kblisteners"),b=new g("set",a,d,arguments);void 0===this[a]?this.add(e,a):!0!==f(b)&&(d.key=b.key,d.value=b.args[1],!0!==h(d)&&(void 0===Object.getOwnPropertyDescriptor(this,b.key).value?Object.getOwnPropertyDescriptor(this,b.key).set(b.args[1],c):Object.defineProperty(this,b.key,v.call(this,b.args[1],b.key)),b.type="postset",f(b)));return this}),remove:b(function(a,b){var c=new l(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),
c=new g("remove",a,c,arguments);if(!0!==f(c)){if(void 0===this[c.key])return console.error("Your attempting to remove the index: ",c.key," that does not exist on ",this),this;this.splice(c.key,c.args[1])}return this}),stringify:b(function(){var a=[];return JSON.stringify(this,function(b,c){if(A(c)||q(c)){if(-1!==a.indexOf(c))return;a.push(c)}return c})}),callSubscribers:b(function(a,b,c){if(void 0!==k[a]){c=0;for(var d=k[a].length;c<d;c++)k[a][c](b)}return this}),subscribe:b(function(a,b){void 0===
k[a]&&(k[a]=[]);k[a].push(b);return this}),unsubscribe:b(function(a,b){if(void 0!==k[a]){var c=0,d=k[a].length;a:for(;c<d;c++)if(k[a][c].toString()===b.toString()){k[a].splice(c,1);break a}}return this}),__kblisteners:b({}),__kbupdatelisteners:b({}),__kbparentlisteners:b({}),__kbparentupdatelisteners:b({}),__kbdatacreatelisteners:b([]),__kbdatadeletelisteners:b([]),addActionListener:b(function(a,b){-1!==Object.keys(r).indexOf(a)?r[a].push(b):console.error("There is no action listener by the name: ",
a);return this}),removeActionListener:b(function(a,b){if(-1!==Object.keys(r).indexOf(a))for(var c=0,d=r[a],f=d.length;c!==f;c++){if(d[c].toString()===b.toString()){d.splice(c,1);break}}else console.error("There is no action listener by the name: ",a);return this})});Object.defineProperties(p,{addDataListener:b(y("__kblisteners")),removeDataListener:b(z("__kblisteners")),addDataUpdateListener:b(y("__kbupdatelisteners")),removeDataUpdateListener:b(z("__kbupdatelisteners")),addDataCreateListener:b(y("__kbdatacreatelisteners")),
removeDataCreateListener:b(z("__kbdatacreatelisteners")),addDataRemoveListener:b(y("__kbdatadeletelisteners")),removeDataRemoveListener:b(z("__kbdatadeletelisteners"))});return p}}();window.define&&window.require?define([],function(){return w}):window.module&&(module.exports=w);return w}();
