var KObservableArray=function(){var y=function(){return function(y,z,C){function h(a,e,c,d,D,b,f){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=e;this.arguments=b;this.type=c;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=d;this.oldValue=D;this.stopChange=f}function l(a,e,c,d){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.type=a;this.key=e;this.event=c;this.args=d}function A(a,e){var c=u[e];return function(d,e){var b=new h(this,m(c)?d:"",a,m(c)?this[d]:"",m(c)?this[d]:"",arguments),b=new l(a,m(c)?d:"",b,arguments),k;!0!==f(b)&&(m(c)?(void 0===c[b.key]&&(c[b.key]=[]),k=c[b.key],k.push(b.args[1])):v(c)&&(void 0===c["*"]&&(c["*"]=[]),k=b.args[1]&&"*"===b.args[1]?c["*"]:c,k.push(b.args[0])));return this}}function B(a,e){var c=u[e];return function(d,e){var b=new h(this,d,a,this[d],
this[d],arguments),b=new l(a,d,b,arguments),k;if(!0!==f(b))if(m(c)){if(k=c[b.key])for(var g=0,n=k.length;g<n;g++)if(k[g].toString()===b.args[1].toString()){k.splice(g,1);break}}else if(v(c))for(void 0===c["*"]&&(c["*"]=[]),k=b.args[1]&&"*"===b.args[1]?c["*"]:c,g=0,n=k.length;g<n;g++)if(k[g].toString()===b.args[0].toString()){k.splice(g,1);break}return this}}function m(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function v(a){return"object"===typeof a&&!!a&&a.constructor.toString()===
Array.toString()}function E(a,e,c){return{get:function(){return a[e]},set:function(c){(this._stopChange?a.stopChange():a)[e]=c;this._stopChange=void 0},enumerable:c.enumerable,configurable:c.configurable}}function b(a,e,c){return{value:a,writable:!!e,enumerable:!1,configurable:!!c}}function w(a,e){var c=a,d=a;return{get:function(){return c},set:function(a){var b=new h(this,e,"set",a,c,arguments,"__kblisteners",this._stopChange);!0!==t(b)&&(d=c,c=a,b.stopChange||(b.listener="__kbupdatelisteners",b.type=
"update",t(b)),this._stopChange||this.callSubscribers(e,c,d));this._stopChange=void 0},configurable:!0,enumerable:!0}}var u=[],g={},x={splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],
removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},f=function(a){for(var e=0,c=x[a.type],d=c.length;e!==d&&(c[e](a),!a._stopPropogration);e++);return a._preventDefault},r=function(a,e){if(!e._stopPropogration&&a)for(var c=0,d=a.length;c!==d&&(a[c](e),!e._stopPropogration);c++);},t=function(a){var e=a.local[a.listener];m(e)?(r(e[a.key],a),"__kblisteners"===a.listener?(r(e["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",r(a.local[a.listener][a.key],
a),r(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(r(e["*"],a),a.fromListener="__kbupdatelisteners",a.listener="__kbparentupdatelisteners",r(a.local[a.listener][a.key],a),r(a.local[a.listener]["*"],a))):v(e)&&(r(e,a),r(e["*"],a));return a._preventDefault};Object.defineProperties(u,{__kbname:b(y||"",!0,!0),__kbref:b(z?z.__kbref||z:u,!0,!0),__kbscopeString:b(C||"",!0,!0),__kbImmediateParent:b(z||null,!0,!0),splice:b(function(a,e,c){var d=new h(this,a,"splice",this[a],void 0,arguments,
"__kbdatadeletelisteners"),b=new l("splice",a,d,arguments);if(!0!==f(b)){var g=[],k=v(b.args[2]),r=void 0!==b.args[2]?k?b.args[2].length:1:0,n=0;if(0!==e&&void 0!==this[b.key-1+b.args[1]]){for(var q=0,m=b.args[1];q<m;q++)if(n=b.key+q,d.key=n,d.type="remove",d.value=this[n],b.key=n,b.type="remove",!0!==f(b)&&!0!==t(d)){g.push(this[n-g.length]);for(var p=b.key,u=this.length-1;p<u;p++)this[p]=this[p+1]}else--b.args[1];this.length-=b.args[1];q=this.length+b.args[1];for(m=this.length;q>m;q--)b.type="postremove",
b.key=q,f(b)}if(0!==r)for(k||(b.args[2]=[b.args[2]]),q=0,m=r;q<m;q++)if(n=b.key+q,d.key=n,d.type="add",d.listener="__kbdatacreatelisteners",d.value=b.args[2][q],b.type="add",b.key=n,!0!==f(b)&&!0!==t(d)){p=this.length;for(u=n;p>u;p--)void 0===this[p]?(Object.defineProperty(this,p,w.call(this,this[p-1],p)),b.key=p,b.type="postadd",f(b)):this[p]=this[p-1];this[n]=b.args[2][q]}b.type="postsplice";f(b)}return g}),push:b(function(a){var e=new h(this,this.length,"push",a,void 0,arguments,"__kbdatacreatelisteners"),
c=new l("push",this.length,e,arguments);!0!==f(c)&&(e.type="add",e.value=c.args[0],e.key=c.key,c.type="add",!0!==f(c)&&!0!==t(e)&&(Object.defineProperty(this,c.key,w.call(this,c.args[0],c.key)),c.type="postadd",f(c),c.type="postpush",f(c)));return this.length}),pop:b(function(){var a=new h(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbdatadeletelisteners"),e=new l("pop",this.length-1,a,arguments);if(!0!==f(e)){var c=this[this.length-1];a.type="remove";e.type="remove";if(!0!==
f(e)&&!0!==t(a))return--this.length,e.type="postremove",f(e),e.type="postpop",f(e),c}return null}),shift:b(function(){var a=new h(this,0,"shift",this[0],void 0,arguments,"__kbdatadeletelisteners"),e=new l("shift",0,a,arguments);if(!0!==f(e)){var c=this[e.key];a.type="remove";a.key=e.key;e.type="remove";if(!0!==f(e)&&!0!==t(a)){for(var a=e.key,d=this.length-1;a<d;a++)this[a]=this[a+1];--this.length;e.type="postremove";f(e);e.type="postshift";f(e);return c}}return null}),unshift:b(function(){var a=
new h(this,0,"unshift",this[0],void 0,arguments,"__kbdatacreatelisteners"),e=new l("unshift",0,a,arguments);if(!0!==f(e)){for(var c=Array.prototype.slice.call(e.args),d=0,b=c.length;d<b;d++)a.key=d,a.type="add",a.value=c[d],e.type="add",e.key=d,!0!==f(e)&&!0!==t(a)||c.splice(d,1);if(0!==c.length){d=this.length-1+c.length;for(b=c.length;-1!==d;d--)d<b?this[d]=c[d]:void 0!==Object.getOwnPropertyDescriptor(this,d).value?(Object.defineProperty(this,d,w.call(this,this[d-c.length],d)),e.type="postadd",
f(e)):this[d]=this[d-c.length];e.type="postunshift";f(e)}}return this.length}),fill:b(function(a,e,c){var d=void 0!==e?Math.max(0,e):0,b=new h(this,d,"fill",a,this[d],arguments,"__kbdatalisteners"),d=new l("fill",d,b,arguments);if(!0!==f(d)){for(b=d.key;b<d.args[2];b++)this[b]=d.args[0];d.type="postfill";f(d)}return this}),reverse:b(function(){var a=new h(this,0,"reverse",value,this[_start],arguments,"__kbdatalisteners"),a=new l("reverse",0,a,arguments);if(!0!==f(a)){for(var b=this.slice().reverse(),
c=0,d=this.length;c<d;c++)this[c]=b[c];a.type="postreverse";f(a)}return this}),sort:b(function(){var a=new h(this,0,"sort",value,this[_start],arguments,"__kbdatalisteners"),a=new l("sort",0,a,arguments);if(!0!==f(a)){for(var b=this.slice(),b=b.sort.apply(b,arguments),c=0,d=this.length;c<d;c++)this[c]=b[c];a.type="postsort";f(a)}return this}),add:b(function(a,b){var c=new h(this,a,"add",b,void 0,arguments,"__kbdatacreatelisteners"),d=new l("add",a,c,arguments);void 0===b?this.push(b):!0!==f(d)&&(void 0===
this[d.key]?!0!==t(c)&&(Object.defineProperty(this,d.key,w.call(this,d.args[1],d.key)),d.type="postadd",f(d)):console.error("Your attempting to add the index: ",d.key," that already exists on",this,"try using set or direct set instead"));return this}),prototype:b(function(a,e){void 0===this[a]?Object.defineProperty(this.__proto__,a,b(e,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),addPointer:b(function(a,b,c){var d=new h(this,
c||b,"add",a[b],void 0,arguments,"__kbdatacreatelisteners"),g=new l("add",c||b,d,arguments);!0!==f(g)&&!0!==t(d)&&(d=Object.getOwnPropertyDescriptor(a,b),Object.defineProperty(this,g.key,E(a,b,d)),g.type="postadd",f(g));return this}),set:b(function(a,b){var c=new h(this,a,"set",b,this[a],arguments,"__kblisteners"),d=new l("set",a,c,arguments);void 0===this[a]?this.add(a,b):!0!==f(d)&&(c.key=d.key,c.value=d.args[1],!0!==t(c)&&(void 0===Object.getOwnPropertyDescriptor(this,d.key).value?this[d.key]=
d.args[1]:Object.defineProperty(this,d.key,w.call(this,d.args[1],d.key)),d.type="postset",f(d)));return this}),remove:b(function(a,b){var c=new h(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),c=new l("remove",a,c,arguments);if(!0!==f(c)){if(void 0===this[c.key])return console.error("Your attempting to remove the index: ",c.key," that does not exist on ",this),this;this.splice(c.key,c.args[1])}return this}),stringify:b(function(){var a=[];return JSON.stringify(this,function(b,
c){if(v(c)||m(c)){if(-1!==a.indexOf(c))return;a.push(c)}return c})}),callSubscribers:b(function(a,b,c){if(void 0!==g[a])for(var d=0,f=g[a].length;d<f;d++)g[a][d](a,b,c);if(void 0!==g["*"])for(d=0,f=g["*"].length;d<f;d++)g["*"][d](a,b,c);return this}),subscribe:b(function(a,b){var c=new h(this,a,"subscribe",this[a],void 0,arguments),c=new l("subscribe",a,c,arguments);!0!==f(c)&&(void 0===g[c.key]&&(g[c.key]=[]),g[c.key].push(b));return this}),unsubscribe:b(function(a,b){var c=new h(this,a,"unsubscribe",
this[a],void 0,arguments),c=new l("unsubscribe",a,c,arguments);if(!0!==f(c)&&void 0!==g[c.key]){var d=0,m=g[c.key].length;a:for(;d<m;d++)if(g[c.key][d].toString()===b.toString()){g[c.key].splice(d,1);break a}}return this}),__kblisteners:b({}),__kbupdatelisteners:b({}),__kbparentlisteners:b({}),__kbparentupdatelisteners:b({}),__kbdatacreatelisteners:b([]),__kbdatadeletelisteners:b([]),addActionListener:b(function(a,b){-1!==Object.keys(x).indexOf(a)?x[a].push(b):console.error("There is no action listener by the name: ",
a);return this}),removeActionListener:b(function(a,b){if(-1!==Object.keys(x).indexOf(a))for(var c=0,d=x[a],f=d.length;c!==f;c++){if(d[c].toString()===b.toString()){d.splice(c,1);break}}else console.error("There is no action listener by the name: ",a);return this}),stopChange:b(function(){this._stopChange=!0;return this}),_stopChange:b(void 0,!0)});Object.defineProperties(u,{addDataListener:b(A("__kblisteners")),removeDataListener:b(B("__kblisteners")),addDataUpdateListener:b(A("__kbupdatelisteners")),
removeDataUpdateListener:b(B("__kbupdatelisteners")),addDataCreateListener:b(A("__kbdatacreatelisteners")),removeDataCreateListener:b(B("__kbdatacreatelisteners")),addDataRemoveListener:b(A("__kbdatadeletelisteners")),removeDataRemoveListener:b(B("__kbdatadeletelisteners"))});return u}}();window.define&&window.require?define([],function(){return y}):window.module&&(module.exports=y);return y}();
