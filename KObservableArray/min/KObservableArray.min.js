var KObservableArray=function(){var y=function(){return function(y,z,C){function l(a,e,b,d,D,c){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=e;this.arguments=c;this.type=b;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=d;this.oldValue=D}function m(a,e,b,d){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=
!0};this.type=a;this.key=e;this.event=b;this.args=d}function A(a,e){var b=u[e];return function(d,e){var c=new l(this,q(b)?d:"",a,q(b)?this[d]:"",q(b)?this[d]:"",arguments),c=new m(a,q(b)?d:"",c,arguments),h;!0!==g(c)&&(q(b)?(void 0===b[c.key]&&(b[c.key]=[]),h=b[c.key],h.push(c.args[1])):v(b)&&(void 0===b["*"]&&(b["*"]=[]),h=c.args[1]&&"*"===c.args[1]?b["*"]:b,h.push(c.args[0])));return this}}function B(a,e){var b=u[e];return function(d,e){var c=new l(this,d,a,this[d],this[d],arguments),c=new m(a,
d,c,arguments),h;if(!0!==g(c))if(q(b)){if(h=b[c.key])for(var k=0,r=h.length;k<r;k++)if(h[k].toString()===c.args[1].toString()){h.splice(k,1);break}}else if(v(b))for(void 0===b["*"]&&(b["*"]=[]),h=c.args[1]&&"*"===c.args[1]?b["*"]:b,k=0,r=h.length;k<r;k++)if(h[k].toString()===c.args[0].toString()){h.splice(k,1);break}return this}}function q(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function v(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}
function E(a,e,b){return{get:function(){return a[e]},set:function(b){a[e]=b},enumerable:b.enumerable,configurable:b.configurable}}function c(a,e,b){return{value:a,writable:!!e,enumerable:!1,configurable:!!b}}function w(a,e){var b=a,d=a,c=function(a,e){d=b;b=a;e.listener="__kbupdatelisteners";e.type="update";t(e)};return{get:function(){return b},set:function(a,g){var k=new l(this,e,"set",a,b,arguments,"__kblisteners");g?c(a,k):!0!==t(k)&&(c(a,k),this.callSubscribers(e,b,d))},configurable:!0,enumerable:!0}}
var u=[],n={},x={splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},g=function(a){for(var e=0,b=x[a.type],d=b.length;e!==
d&&(b[e](a),!a._stopPropogration);e++);return a._preventDefault},f=function(a,e){if(!e._stopPropogration&&a)for(var b=0,d=a.length;b!==d&&(a[b](e),!e._stopPropogration);b++);},t=function(a){var e=a.local[a.listener];q(e)?(f(e[a.key],a),"__kblisteners"===a.listener?(f(e["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",f(a.local[a.listener][a.key],a),f(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(f(e["*"],a),a.fromListener="__kbupdatelisteners",a.listener=
"__kbparentupdatelisteners",f(a.local[a.listener][a.key],a),f(a.local[a.listener]["*"],a))):v(e)&&(f(e,a),f(e["*"],a));return a._preventDefault};Object.defineProperties(u,{__kbname:c(y||"",!0,!0),__kbref:c(z?z.__kbref||z:u,!0,!0),__kbscopeString:c(C||"",!0,!0),__kbImmediateParent:c(z||null,!0,!0),splice:c(function(a,e,b){var d=new l(this,a,"splice",this[a],void 0,arguments,"__kbdatadeletelisteners"),c=new m("splice",a,d,arguments);if(!0!==g(c)){var n=[],h=v(c.args[2]),k=void 0!==c.args[2]?h?c.args[2].length:
1:0,r=0;if(0!==e&&void 0!==this[c.key-1+c.args[1]]){for(var f=0,q=c.args[1];f<q;f++)if(r=c.key+f,d.key=r,d.type="remove",d.value=this[r],!0!==t(d)){n.push(this[r-n.length]);for(var p=c.key,u=this.length-1;p<u;p++)this[p]=this[p+1]}else--c.args[1];this.length-=c.args[1]}if(0!==k)for(h||(c.args[2]=[c.args[2]]),f=0,q=k;f<q;f++)if(r=c.key+f,d.key=r,d.type="add",d.listener="__kbdatacreatelisteners",d.value=c.args[2][f],!0!==t(d)){p=this.length;for(u=r;p>u;p--)void 0===this[p]?Object.defineProperty(this,
p,w.call(this,this[p-1],p)):this[p]=this[p-1];this[r]=c.args[2][f]}c.type="postsplice";g(c)}return n}),push:c(function(a){var e=new l(this,this.length,"push",a,void 0,arguments,"__kbdatacreatelisteners"),b=new m("push",this.length,e,arguments);!0!==g(b)&&(e.type="add",e.value=b.args[0],e.key=b.key,!0!==t(e)&&(Object.defineProperty(this,b.key,w.call(this,b.args[0],b.key)),b.type="postpush",g(b)));return this.length}),pop:c(function(){var a=new l(this,this.length-1,"pop",this[this.length-1],void 0,
arguments,"__kbdatadeletelisteners"),e=new m("pop",this.length-1,a,arguments);if(!0!==g(e)){var b=this[this.length-1];a.type="remove";if(!0!==t(a))return--this.length,e.type="postpop",g(e),b}return null}),shift:c(function(){var a=new l(this,0,"shift",this[0],void 0,arguments,"__kbdatadeletelisteners"),e=new m("shift",0,a,arguments);if(!0!==g(e)){var b=this[e.key];a.type="remove";a.key=e.key;if(!0!==t(a)){for(var a=e.key,d=this.length-1;a<d;a++)this[a]=this[a+1];--this.length;e.type="postshift";g(e);
return b}}return null}),unshift:c(function(){var a=new l(this,0,"unshift",this[0],void 0,arguments,"__kbdatacreatelisteners"),e=new m("unshift",0,a,arguments);if(!0!==g(e)){for(var b=Array.prototype.slice.call(e.args),d=0,c=b.length;d<c;d++)a.key=d,a.type="add",a.value=b[d],!0===t(a)&&b.splice(d,1);if(0!==b.length){d=this.length-1+b.length;for(c=b.length;-1!==d;d--)d<c?this[d]=b[d]:void 0!==Object.getOwnPropertyDescriptor(this,d).value?Object.defineProperty(this,d,w.call(this,this[d-b.length],d)):
this[d]=this[d-b.length];e.type="postunshift";g(e)}}return this.length}),fill:c(function(a,e,b){var d=void 0!==e?Math.max(0,e):0,c=new l(this,d,"fill",a,this[d],arguments,"__kbdatalisteners"),d=new m("fill",d,c,arguments);if(!0!==g(d)){for(c=d.key;c<d.args[2];c++)this[c]=d.args[0];d.type="postfill";g(d)}return this}),reverse:c(function(){var a=new l(this,0,"reverse",value,this[_start],arguments,"__kbdatalisteners"),a=new m("reverse",0,a,arguments);if(!0!==g(a)){for(var e=this.slice().reverse(),b=
0,d=this.length;b<d;b++)this[b]=e[b];a.type="postreverse";g(a)}return this}),sort:c(function(){var a=new l(this,0,"sort",value,this[_start],arguments,"__kbdatalisteners"),a=new m("sort",0,a,arguments);if(!0!==g(a)){for(var e=this.slice(),e=e.sort.apply(e,arguments),b=0,d=this.length;b<d;b++)this[b]=e[b];a.type="postsort";g(a)}return this}),add:c(function(a,e){var b=new l(this,a,"add",e,void 0,arguments,"__kbdatacreatelisteners"),d=new m("add",a,b,arguments);void 0===a?this.push(e):!0!==g(d)&&(void 0===
this[d.key]?!0!==t(b)&&(Object.defineProperty(this,d.key,w.call(this,d.args[1],d.key)),d.type="postadd",g(d)):console.error("Your attempting to add the index: ",d.key," that already exists on",this,"try using set or direct set instead"));return this}),prototype:c(function(a,e){void 0===this[a]?Object.defineProperty(this.__proto__,a,c(e,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),addPointer:c(function(a,e,b){var d=new l(this,
b||e,"add",a[e],void 0,arguments,"__kbdatacreatelisteners"),c=new m("add",b||e,d,arguments);!0!==g(c)&&!0!==t(d)&&(d=Object.getOwnPropertyDescriptor(a,e),Object.defineProperty(this,c.key,E(a,e,d)),c.type="postadd",g(c));return this}),set:c(function(a,c,b){var d=new l(this,a,"set",c,this[a],arguments,"__kblisteners"),f=new m("set",a,d,arguments);void 0===this[a]?this.add(a,c):!0!==g(f)&&(d.key=f.key,d.value=f.args[1],!0!==t(d)&&(void 0===Object.getOwnPropertyDescriptor(this,f.key).value?Object.getOwnPropertyDescriptor(this,
f.key).set(f.args[1],b):Object.defineProperty(this,f.key,w.call(this,f.args[1],f.key)),f.type="postset",g(f)));return this}),remove:c(function(a,c){var b=new l(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new m("remove",a,b,arguments);if(!0!==g(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the index: ",b.key," that does not exist on ",this),this;this.splice(b.key,b.args[1])}return this}),stringify:c(function(){var a=[];return JSON.stringify(this,
function(c,b){if(v(b)||q(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:c(function(a,c,b){if(void 0!==n[a]){b=0;for(var d=n[a].length;b<d;b++)n[a][b](c)}return this}),subscribe:c(function(a,c){void 0===n[a]&&(n[a]=[]);n[a].push(c);return this}),unsubscribe:c(function(a,c){if(void 0!==n[a]){var b=0,d=n[a].length;a:for(;b<d;b++)if(n[a][b].toString()===c.toString()){n[a].splice(b,1);break a}}return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),
__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,c){-1!==Object.keys(x).indexOf(a)?x[a].push(c):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:c(function(a,c){if(-1!==Object.keys(x).indexOf(a))for(var b=0,d=x[a],f=d.length;b!==f;b++){if(d[b].toString()===c.toString()){d.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this})});Object.defineProperties(u,
{addDataListener:c(A("__kblisteners")),removeDataListener:c(B("__kblisteners")),addDataUpdateListener:c(A("__kbupdatelisteners")),removeDataUpdateListener:c(B("__kbupdatelisteners")),addDataCreateListener:c(A("__kbdatacreatelisteners")),removeDataCreateListener:c(B("__kbdatacreatelisteners")),addDataRemoveListener:c(A("__kbdatadeletelisteners")),removeDataRemoveListener:c(B("__kbdatadeletelisteners"))});return u}}();window.define&&window.require?define([],function(){return y}):window.module&&(module.exports=
y);return y}();
