(function(){var u=function(){return function(u,v,z){function l(a,b,c,q,d,e){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=b;this.arguments=e;this.type=c;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=q;this.oldValue=d}function w(a){var b=this[a];return function(a,q){b[a]=q;return this}}function x(a){var b=this[a];return function(a,q){void 0!==
q&&(b=b[a]);for(var d=0,e=b.length;d<e;d++)if(b[d].toString()===q.toString()){b.splice(d,1);break}return this}}function A(a,b,c){return{get:function(){return a[b]},set:function(c){a[b]=c},enumerable:c.enumerable,configurable:c.configurable}}function d(a,b){return{value:a,writable:!!b,enumerable:!1,configurable:!1}}function r(a,b){var c=a,d=a,h=B,e=C;return{get:function(){return c},set:function(a,f){!0!==h(this,b,a,c)&&(d=c,c=a,e(this,b,c,d),f||this.callSubscribers(b,c,d))},configurable:!0,enumerable:!0}}
var e=[],p={splice:[],push:[],pop:[],shift:[],unshift:[],fill:[],reverse:[],sort:[],add:[],set:[],remove:[]},f=function(a,b,c,d,h,e){a=new l(a,b,c,d,h,e);b=0;c=p[c];for(d=c.length;b!==d&&(c[b](a),!a._stopPropogration);b++);return a._preventDefault},k={},B=function(a,b,c,d,h){a=new l(a,b,c,d,h);e.onset(a);return a._preventDefault},C=function(a,b,c,d,h){a=new l(a,b,c,d,h);e.onupdate(a);return a._preventDefault},t=function(a,b,c,d,h){a=new l(a,b,c,d,h);e.onadd(a);return a._preventDefault},y=function(a,
b,c,d,h){a=new l(a,b,c,d,h);e.onremove(a);return a._preventDefault};e.onadd=function(a){};e.onremove=function(a){};e.onset=function(a){};e.onupdate=function(a){};e.onobject=function(a){return a};Object.defineProperties(e,{__kbname:d(u||"",!0),__kbref:d(v?v.__kbref||v:e,!0),__kbscopeString:d(z||"",!0),__kbImmediateParent:d(v||null,!0),splice:d(function(a,b,c){var d=[],e="[object Array]"===Object.prototype.toString.call(c),l=void 0!==c?e?c.length:1:0,m=0;if(0!==b&&void 0!==this[a-1+b]){for(var n=0,
k=b;n<k;n++)if(m=a+n,!0!==y(this,m,"remove",this[m])){d.push(this[m-d.length]);for(var g=a,p=this.length-1;g<p;g++)this[g]=this[g+1]}else--b;this.length-=b}if(0!==l)for(e||(c=[c]),n=0,k=l;n<k;n++)if(m=a+n,!0!==t(this,m,"add",c[n],this[m])){g=this.length;for(p=m;g>p;g--)void 0===this[g]?Object.defineProperty(this,g,r.call(this,this[g-1],g)):this[g]=this[g-1];this[m]=c[n]}f(this,a,"splice",c,void 0,arguments);return d}),push:d(function(a){!0!==t(this,this.length,"add",a)&&(Object.defineProperty(this,
this.length,r.call(this,a,this.length)),f(this,this.length-1,"push",a,void 0,arguments));return this.length}),pop:d(function(){var a=this[this.length-1];return!0!==y(this,this.length-1,"remove",a)?(--this.length,f(this,this.length,"pop",a,void 0,arguments),a):null}),shift:d(function(){var a=this[0];if(!0!==y(this,0,"remove",a)){for(var b=0,c=this.length-1;b<c;b++)this[b]=this[b+1];--this.length;f(this,0,"shift",a,void 0,arguments);return a}return null}),unshift:d(function(){for(var a=Array.prototype.slice.call(arguments),
b=0,c=a.length;b<c;b++)!0===t(this,b,"add",a[b])&&a.splice(b,1);if(0!==a.length){b=this.length-1+a.length;for(c=a.length;-1!==b;b--)b<c?this[b]=a[b]:void 0!==Object.getOwnPropertyDescriptor(this,b).value?Object.defineProperty(this,b,r.call(this,this[b-a.length],b)):this[b]=this[b-a.length];f(this,0,"unshift",a,void 0,arguments)}return this.length}),fill:d(function(a,b,c){for(var d=void 0!==c&&c<=this.length?Math.min(this.length,Math.max(0,c)):this.length,e=void 0!==b?Math.max(0,b):0;e<d;e++)this[e]=
a;f(this,0,"fill",a,void 0,arguments);return this}),reverse:d(function(){for(var a=this.slice().reverse(),b=0,c=this.length;b<c;b++)this[b]=a[b];f(this,0,"reverse",a,void 0,arguments);return this}),sort:d(function(){for(var a=this.slice(),a=a.sort.apply(a,arguments),b=0,c=this.length;b<c;b++)this[b]=a[b];f(this,0,"sort",a,void 0,arguments);return this}),add:d(function(a,b){void 0===b?this.push(a):void 0===this[b]?!0!==t(this,b,"add",a)&&(Object.defineProperty(this,b,r.call(this,a,b)),f(this,b,"add",
a,void 0,arguments)):console.error("Your attempting to add the index: ",b," that already exists on",this,"try using set or direct set instead");return this}),addPointer:d(function(a,b,c){if(!0!==t(this,c||b,a[b])){var d=Object.getOwnPropertyDescriptor(a,b);Object.defineProperty(this,c||b,A(a,b,d));f(this,c||b,"add",a[b],void 0,arguments)}return this}),set:d(function(a,b,c){void 0===this[a]?this.add(b,a):(void 0===Object.getOwnPropertyDescriptor(this,a).value?Object.getOwnPropertyDescriptor(this,a).set(b,
c):Object.defineProperty(this,a,r.call(this,b,a)),f(this,a,"set",b,void 0,arguments));return this}),remove:d(function(a,b){if(void 0===this[a])return console.error("Your attempting to remove the index: ",a," that does not exist on ",this),this;var c=this[a];this.splice(a,b);f(this,a,"remove",c,void 0,arguments);return this}),stringify:d(function(){var a=[];return JSON.stringify(this,function(b,c){if("[object Array]"===Object.prototype.toString.call(c)||"object"===typeof c&&c&&"[object Object]"===
Object.prototype.toString.call(c)){if(-1!==a.indexOf(c))return;a.push(c)}return c})}),callSubscribers:d(function(a,b,c){if(void 0!==k[a]){b=new l(this,a,"subscriber",b,c);c=0;for(var d=k[a].length;c<d&&(k[a][c](b),!b._stopPropogration);c++);}return this}),subscribe:d(function(a,b){void 0===k[a]&&(k[a]=[]);k[a].push(b);return this}),__kblisteners:d({}),__kbupdatelisteners:d({}),__kbparentlisteners:d({}),__kbparentupdatelisteners:d({}),__kbdatacreatelisteners:d([]),__kbdatadeletelisteners:d([]),addActionListener:d(function(a,
b){-1!==Object.keys(p).indexOf(a)?p[a].push(b):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:d(function(a,b){if(-1!==Object.keys(p).indexOf(a))for(var c=0,d=p[a],e=d.length;c!==e;c++){if(d[c].toString()===b.toString()){d.splice(c,1);break}}else console.error("There is no action listener by the name: ",a);return this})});Object.defineProperties(e,{addDataListener:d(w("__kblisteners")),removeDataListener:d(x("__kblisteners")),addDataUpdateListener:d(w("__kbupdatelisteners")),
removeDataUpdateListener:d(x("__kbupdatelisteners")),addDataCreateListener:d(w("__kbdatacreatelisteners")),removeDataCreateListener:d(x("__kbdatacreatelisteners")),addDataRemoveListener:d(w("__kbdatadeletelisteners")),removeDataRemoveListener:d(x("__kbdatadeletelisteners"))});return e}}();define&&require?define([],function(){return u}):module&&(module.exports=u);return u})();
