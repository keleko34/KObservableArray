var KObservableArray=function(){var x=function(){return function(x,y,D){function h(a,d,b,c,C,e,f,h){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=d;this.arguments=e;this.type=b;this.listener=f;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=c;this.oldValue=C;this.stopChange=h}function m(a,d,b,c){this.stopPropogation=function(){this._stopPropogration=
!0};this.preventDefault=function(){this._preventDefault=!0};this.type=a;this.key=d;this.event=b;this.args=c}function z(a,d){var b=t[d];return function(c,C){var e=new h(this,l(b)?c:"",a,l(b)?this[c]:"",l(b)?this[c]:"",arguments,d),e=new m(a,l(b)?c:"",e,arguments),k;!0!==f(e)&&(l(b)?(void 0===b[e.key]&&(b[e.key]=[]),k=b[e.key],k.push(e.args[1])):A(b)&&(void 0===b["*"]&&(b["*"]=[]),k=e.args[1]&&"*"===e.args[1]?b["*"]:b,k.push(e.args[0])));return this}}function B(a,d){var b=t[d];return function(c,e){var v=
new h(this,c,a,this[c],this[c],arguments,d),v=new m(a,c,v,arguments),k;if(!0!==f(v))if(l(b)){if(k=b[v.key])for(var g=0,p=k.length;g<p;g++)if(k[g].toString()===v.args[1].toString()){k.splice(g,1);break}}else if(A(b))for(void 0===b["*"]&&(b["*"]=[]),k=v.args[1]&&"*"===v.args[1]?b["*"]:b,g=0,p=k.length;g<p;g++)if(k[g].toString()===v.args[0].toString()){k.splice(g,1);break}return this}}function l(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function A(a){return"object"===
typeof a&&!!a&&a.constructor.toString()===Array.toString()}function E(a,d,b){return{get:function(){return a[d]},set:function(b){(this._stopChange?a.stopChange():a)[d]=b;this._stopChange=void 0},enumerable:b.enumerable,configurable:b.configurable}}function e(a,d,b){return{value:a,writable:!!d,enumerable:!1,configurable:!!b}}function w(a,d){var b=a,c=a;return{get:function(){return b},set:function(a){var e=new h(this,d,"set",a,b,arguments,"__kblisteners",this._stopChange);!0!==r(e)&&(c=b,b=a,e.stopChange||
(e.listener="__kbupdatelisteners",e.type="update",r(e)),this._stopChange||this.callSubscribers(d,b,c));this._stopChange=void 0},configurable:!0,enumerable:!0}}var t=[],g={},u={splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],
removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},f=function(a){for(var d=0,b=u[a.type],c=b.length;d!==c&&(b[d](a),!a._stopPropogration);d++);return a._preventDefault},q=function(a,d){if(!d._stopPropogration&&a)for(var b=0,c=a.length;b!==c&&(a[b](d),!d._stopPropogration);b++);},r=function(a){var d=a.local[a.listener];l(d)?(q(d[a.key],a),"__kblisteners"===a.listener?(q(d["*"],a),a.fromListener="__kblisteners",a.listener=
"__kbparentlisteners",q(a.local[a.listener][a.key],a),q(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(q(d["*"],a),a.fromListener="__kbupdatelisteners",a.listener="__kbparentupdatelisteners",q(a.local[a.listener][a.key],a),q(a.local[a.listener]["*"],a))):A(d)&&(q(d,a),q(d["*"],a));return a._preventDefault};Object.defineProperties(t,{__kbname:e(x||"",!0,!0),__kbref:e(y?y.__kbref||y:t,!0,!0),__kbscopeString:e(D||"",!0,!0),__kbImmediateParent:e(y||null,!0,!0),splice:e(function(a,d,
b){var c=new h(this,a,"splice",this[a],void 0,arguments,"__kbdatadeletelisteners"),e=new m("splice",a,c,arguments);if(!0!==f(e)){var g=[],k=Array.prototype.slice.call(arguments),q=k.length-2,p=0;k.splice(0,2);if(0!==d&&void 0!==this[e.key-1+e.args[1]])for(var l=0,t=e.args[1];l<t;l++)if(p=e.key,c.key=p,c.type="remove",c.value=this[p],e.type="remove",!0!==f(e)&&!0!==r(c)){g.push(this[p]);for(var n=e.key,u=this.length-1;n<u;n++)this[n]=this[n+1];--this.length;e.type="postremove";f(e)}else--e.args[1];
if(0!==q)for(l=0,t=q;l<t;l++)if(p=e.key+Math.min(1,l),c.key=p,c.type="add",c.listener="__kbdatacreatelisteners",c.value=k[l],e.type="add",e.key=p,!0!==f(e)&&!0!==r(c)){n=this.length;for(u=p;n>u;n--)void 0===this[n]?(Object.defineProperty(this,n,w.call(this,this[n-1],n)),e.key=n,e.type="postadd",f(e)):this[n]=this[n-1];this[p]=k[l]}e.type="postsplice";f(e)}return g}),push:e(function(a){var d=new h(this,this.length,"push",a,void 0,arguments,"__kbdatacreatelisteners"),b=new m("push",this.length,d,arguments);
!0!==f(b)&&(d.type="add",d.value=b.args[0],d.key=b.key,b.type="add",!0!==f(b)&&!0!==r(d)&&(Object.defineProperty(this,b.key,w.call(this,b.args[0],b.key)),b.type="postadd",f(b),b.type="postpush",f(b)));return this.length}),pop:e(function(){var a=new h(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbdatadeletelisteners"),d=new m("pop",this.length-1,a,arguments);if(!0!==f(d)){var b=this[this.length-1];a.type="remove";d.type="remove";if(!0!==f(d)&&!0!==r(a))return--this.length,d.type=
"postremove",f(d),d.type="postpop",f(d),b}return null}),shift:e(function(){var a=new h(this,0,"shift",this[0],void 0,arguments,"__kbdatadeletelisteners"),d=new m("shift",0,a,arguments);if(!0!==f(d)){var b=this[d.key];a.type="remove";a.key=d.key;d.type="remove";if(!0!==f(d)&&!0!==r(a)){for(var a=d.key,c=this.length-1;a<c;a++)this[a]=this[a+1];--this.length;d.type="postremove";f(d);d.type="postshift";f(d);return b}}return null}),unshift:e(function(){var a=new h(this,0,"unshift",this[0],void 0,arguments,
"__kbdatacreatelisteners"),d=new m("unshift",0,a,arguments);if(!0!==f(d)){for(var b=Array.prototype.slice.call(d.args),c=0,e=b.length;c<e;c++)a.key=c,a.type="add",a.value=b[c],d.type="add",d.key=c,!0!==f(d)&&!0!==r(a)||b.splice(c,1);if(0!==b.length){c=this.length-1+b.length;for(e=b.length;-1!==c;c--)c<e?this[c]=b[c]:void 0!==Object.getOwnPropertyDescriptor(this,c).value?(Object.defineProperty(this,c,w.call(this,this[c-b.length],c)),d.type="postadd",f(d)):this[c]=this[c-b.length];d.type="postunshift";
f(d)}}return this.length}),fill:e(function(a,d,b){var c=void 0!==d?Math.max(0,d):0,e=new h(this,c,"fill",a,this[c],arguments,"__kbdatalisteners"),c=new m("fill",c,e,arguments);if(!0!==f(c)){for(e=c.key;e<c.args[2];e++)this[e]=c.args[0];c.type="postfill";f(c)}return this}),reverse:e(function(){var a=new h(this,0,"reverse",value,this[_start],arguments,"__kbdatalisteners"),a=new m("reverse",0,a,arguments);if(!0!==f(a)){for(var d=this.slice().reverse(),b=0,c=this.length;b<c;b++)this[b]=d[b];a.type="postreverse";
f(a)}return this}),sort:e(function(){var a=new h(this,0,"sort",value,this[_start],arguments,"__kbdatalisteners"),a=new m("sort",0,a,arguments);if(!0!==f(a)){for(var d=this.slice(),d=d.sort.apply(d,arguments),b=0,c=this.length;b<c;b++)this[b]=d[b];a.type="postsort";f(a)}return this}),add:e(function(a,d){var b=new h(this,a,"add",d,void 0,arguments,"__kbdatacreatelisteners"),c=new m("add",a,b,arguments);void 0===d?this.push(a):!0!==f(c)&&(void 0===this[c.key]?!0!==r(b)&&(Object.defineProperty(this,c.key,
w.call(this,c.args[1],c.key)),c.type="postadd",f(c)):console.error("Your attempting to add the index: ",c.key," that already exists on",this,"try using set or direct set instead"));return this}),prototype:e(function(a,d){void 0===this[a]?Object.defineProperty(this.__proto__,a,e(d,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),addPointer:e(function(a,d,b){var c=new h(this,b||d,"add",a[d],void 0,arguments,"__kbdatacreatelisteners"),
e=new m("add",b||d,c,arguments);!0!==f(e)&&!0!==r(c)&&(c=Object.getOwnPropertyDescriptor(a,d),Object.defineProperty(this,e.key,E(a,d,c)),e.type="postadd",f(e));return this}),set:e(function(a,d){var b=new h(this,a,"set",d,this[a],arguments,"__kblisteners"),c=new m("set",a,b,arguments);void 0===this[a]?this.add(a,d):!0!==f(c)&&(b.key=c.key,b.value=c.args[1],!0!==r(b)&&(void 0===Object.getOwnPropertyDescriptor(this,c.key).value?this[c.key]=c.args[1]:Object.defineProperty(this,c.key,w.call(this,c.args[1],
c.key)),c.type="postset",f(c)));return this}),remove:e(function(a,d){var b=new h(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new m("remove",a,b,arguments);if(!0!==f(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the index: ",b.key," that does not exist on ",this),this;this.splice(b.key,b.args[1])}return this}),stringify:e(function(){var a=[];return JSON.stringify(this,function(d,b){if(A(b)||l(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),
callSubscribers:e(function(a,d,b){if(void 0!==g[a])for(var c=0,e=g[a].length;c<e;c++)g[a][c](a,d,b);if(void 0!==g["*"])for(c=0,e=g["*"].length;c<e;c++)g["*"][c](a,d,b);return this}),subscribe:e(function(a,d){var b=new h(this,a,"subscribe",this[a],void 0,arguments,"__kbsubscribers"),b=new m("subscribe",a,b,arguments);!0!==f(b)&&(void 0===g[b.key]&&(g[b.key]=[]),g[b.key].push(d));return this}),unsubscribe:e(function(a,d){var b=new h(this,a,"unsubscribe",this[a],void 0,arguments,"__kbsubscribers"),b=
new m("unsubscribe",a,b,arguments);if(!0!==f(b)&&void 0!==g[b.key]){var c=0,e=g[b.key].length;a:for(;c<e;c++)if(g[b.key][c].toString()===d.toString()){g[b.key].splice(c,1);break a}}return this}),__kblisteners:e({}),__kbupdatelisteners:e({}),__kbparentlisteners:e({}),__kbparentupdatelisteners:e({}),__kbdatacreatelisteners:e([]),__kbdatadeletelisteners:e([]),addActionListener:e(function(a,d){-1!==Object.keys(u).indexOf(a)?u[a].push(d):console.error("There is no action listener by the name: ",a);return this}),
removeActionListener:e(function(a,d){if(-1!==Object.keys(u).indexOf(a))for(var b=0,c=u[a],e=c.length;b!==e;b++){if(c[b].toString()===d.toString()){c.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this}),stopChange:e(function(){this._stopChange=!0;return this}),_stopChange:e(void 0,!0)});Object.defineProperties(t,{addDataListener:e(z("addDataListener","__kblisteners")),removeDataListener:e(B("removeDataListener","__kblisteners")),addDataUpdateListener:e(z("addDataUpdateListener",
"__kbupdatelisteners")),removeDataUpdateListener:e(B("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:e(z("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:e(B("addDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:e(z("addDataRemoveListener","__kbdatadeletelisteners")),removeDataRemoveListener:e(B("removeDataRemoveListener","__kbdatadeletelisteners"))});return t}}();window.define&&window.require?define([],function(){return x}):
window.module&&(module.exports=x);return x}();
