var KObservableArray=function(){var z=function(){return function(z,A,D){function l(a,c,b,d,e,g){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=c;this.arguments=g;this.type=b;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=d;this.oldValue=e}function m(a,c,b,d){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=
!0};this.type=a;this.key=c;this.event=b;this.args=d}function B(a,c){var b=v[c];return function(c,e){var f=new l(this,n(b)?c:"",a,n(b)?this[c]:"",n(b)?this[c]:"",arguments),f=new m(a,n(b)?c:"",f,arguments),q;!0!==g(f)&&(n(b)?(void 0===b[f.key]&&(b[f.key]=[]),q=b[f.key],q.push(f.args[1])):w(b)&&(void 0===b["*"]&&(b["*"]=[]),q=f.args[1]&&"*"===f.args[1]?b["*"]:b,q.push(f.args[0])));return this}}function C(a,c){var b=v[c];return function(c,e){var f=new l(this,c,a,this[c],this[c],arguments),f=new m(a,
c,f,arguments),q;if(!0!==g(f))if(n(b)){if(q=b[f.key])for(var t=0,h=q.length;t<h;t++)if(q[t].toString()===f.args[1].toString()){q.splice(t,1);break}}else if(w(b))for(void 0===b["*"]&&(b["*"]=[]),q=f.args[1]&&"*"===f.args[1]?b["*"]:b,t=0,h=q.length;t<h;t++)if(q[t].toString()===f.args[0].toString()){q.splice(t,1);break}return this}}function n(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function w(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}
function E(a,c,b){return{get:function(){return a[c]},set:function(b){a[c]=b},enumerable:b.enumerable,configurable:b.configurable}}function f(a,c,b){return{value:a,writable:!!c,enumerable:!1,configurable:!!b}}function x(a,c){var b=a,d=a,e=function(a,c){d=b;b=a;c.listener="__kbupdatelisteners";c.type="update";u(c)};return{get:function(){return b},set:function(a,f){var g=new l(this,c,"set",a,b,arguments,"__kblisteners");f?e(a,g):!0!==u(g)&&(e(a,g),this.callSubscribers(c,b,d))},configurable:!0,enumerable:!0}}
var v=[],h={},y={splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},g=function(a){for(var c=
0,b=y[a.type],d=b.length;c!==d&&(b[c](a),!a._stopPropogration);c++);return a._preventDefault},k=function(a,c){if(!c._stopPropogration&&a)for(var b=0,d=a.length;b!==d&&(a[b](c),!c._stopPropogration);b++);},u=function(a){var c=a.local[a.listener];n(c)?(k(c[a.key],a),"__kblisteners"===a.listener?(k(c["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",k(a.local[a.listener][a.key],a),k(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(k(c["*"],a),a.fromListener="__kbupdatelisteners",
a.listener="__kbparentupdatelisteners",k(a.local[a.listener][a.key],a),k(a.local[a.listener]["*"],a))):w(c)&&(k(c,a),k(c["*"],a));return a._preventDefault};Object.defineProperties(v,{__kbname:f(z||"",!0,!0),__kbref:f(A?A.__kbref||A:v,!0,!0),__kbscopeString:f(D||"",!0,!0),__kbImmediateParent:f(A||null,!0,!0),splice:f(function(a,c,b){var d=new l(this,a,"splice",this[a],void 0,arguments,"__kbdatadeletelisteners"),e=new m("splice",a,d,arguments);if(!0!==g(e)){var f=[],h=w(e.args[2]),t=void 0!==e.args[2]?
h?e.args[2].length:1:0,k=0;if(0!==c&&void 0!==this[e.key-1+e.args[1]]){for(var r=0,n=e.args[1];r<n;r++)if(k=e.key+r,d.key=k,d.type="remove",d.value=this[k],e.key=k,e.type="remove",!0!==g(e)&&!0!==u(d)){f.push(this[k-f.length]);for(var p=e.key,v=this.length-1;p<v;p++)this[p]=this[p+1]}else--e.args[1];this.length-=e.args[1];r=0;for(n=e.args[1];r<n;r++)e.type="postremove",e.key=this.length+r,g(e)}if(0!==t)for(h||(e.args[2]=[e.args[2]]),r=0,n=t;r<n;r++)if(k=e.key+r,d.key=k,d.type="add",d.listener="__kbdatacreatelisteners",
d.value=e.args[2][r],e.type="add",!0!==g(e)&&!0!==u(d)){p=this.length;for(v=k;p>v;p--)void 0===this[p]?(Object.defineProperty(this,p,x.call(this,this[p-1],p)),e.key=p,e.type="postadd",g(e)):this[p]=this[p-1];this[k]=e.args[2][r]}e.type="postsplice";g(e)}return f}),push:f(function(a){var c=new l(this,this.length,"push",a,void 0,arguments,"__kbdatacreatelisteners"),b=new m("push",this.length,c,arguments);!0!==g(b)&&(c.type="add",c.value=b.args[0],c.key=b.key,b.type="add",!0!==g(b)&&!0!==u(c)&&(Object.defineProperty(this,
b.key,x.call(this,b.args[0],b.key)),b.type="postadd",g(b),b.type="postpush",g(b)));return this.length}),pop:f(function(){var a=new l(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbdatadeletelisteners"),c=new m("pop",this.length-1,a,arguments);if(!0!==g(c)){var b=this[this.length-1];a.type="remove";c.type="remove";if(!0!==g(c)&&!0!==u(a))return--this.length,c.type="postremove",g(c),c.type="postpop",g(c),b}return null}),shift:f(function(){var a=new l(this,0,"shift",this[0],void 0,
arguments,"__kbdatadeletelisteners"),c=new m("shift",0,a,arguments);if(!0!==g(c)){var b=this[c.key];a.type="remove";a.key=c.key;c.type="remove";if(!0!==g(c)&&!0!==u(a)){for(var a=c.key,d=this.length-1;a<d;a++)this[a]=this[a+1];--this.length;c.type="postremove";g(c);c.type="postshift";g(c);return b}}return null}),unshift:f(function(){var a=new l(this,0,"unshift",this[0],void 0,arguments,"__kbdatacreatelisteners"),c=new m("unshift",0,a,arguments);if(!0!==g(c)){for(var b=Array.prototype.slice.call(c.args),
d=0,e=b.length;d<e;d++)a.key=d,a.type="add",a.value=b[d],c.type="add",c.key=d,!0!==g(c)&&!0!==u(a)||b.splice(d,1);if(0!==b.length){d=this.length-1+b.length;for(e=b.length;-1!==d;d--)d<e?this[d]=b[d]:void 0!==Object.getOwnPropertyDescriptor(this,d).value?(Object.defineProperty(this,d,x.call(this,this[d-b.length],d)),c.type="postadd",g(c)):this[d]=this[d-b.length];c.type="postunshift";g(c)}}return this.length}),fill:f(function(a,c,b){var d=void 0!==c?Math.max(0,c):0,e=new l(this,d,"fill",a,this[d],
arguments,"__kbdatalisteners"),d=new m("fill",d,e,arguments);if(!0!==g(d)){for(e=d.key;e<d.args[2];e++)this[e]=d.args[0];d.type="postfill";g(d)}return this}),reverse:f(function(){var a=new l(this,0,"reverse",value,this[_start],arguments,"__kbdatalisteners"),a=new m("reverse",0,a,arguments);if(!0!==g(a)){for(var c=this.slice().reverse(),b=0,d=this.length;b<d;b++)this[b]=c[b];a.type="postreverse";g(a)}return this}),sort:f(function(){var a=new l(this,0,"sort",value,this[_start],arguments,"__kbdatalisteners"),
a=new m("sort",0,a,arguments);if(!0!==g(a)){for(var c=this.slice(),c=c.sort.apply(c,arguments),b=0,d=this.length;b<d;b++)this[b]=c[b];a.type="postsort";g(a)}return this}),add:f(function(a,c){var b=new l(this,a,"add",c,void 0,arguments,"__kbdatacreatelisteners"),d=new m("add",a,b,arguments);void 0===a?this.push(c):!0!==g(d)&&(void 0===this[d.key]?!0!==u(b)&&(Object.defineProperty(this,d.key,x.call(this,d.args[1],d.key)),d.type="postadd",g(d)):console.error("Your attempting to add the index: ",d.key,
" that already exists on",this,"try using set or direct set instead"));return this}),prototype:f(function(a,c){void 0===this[a]?Object.defineProperty(this.__proto__,a,f(c,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),addPointer:f(function(a,c,b){var d=new l(this,b||c,"add",a[c],void 0,arguments,"__kbdatacreatelisteners"),e=new m("add",b||c,d,arguments);!0!==g(e)&&!0!==u(d)&&(d=Object.getOwnPropertyDescriptor(a,c),Object.defineProperty(this,
e.key,E(a,c,d)),e.type="postadd",g(e));return this}),set:f(function(a,c,b){var d=new l(this,a,"set",c,this[a],arguments,"__kblisteners"),e=new m("set",a,d,arguments);void 0===this[a]?this.add(a,c):!0!==g(e)&&(d.key=e.key,d.value=e.args[1],!0!==u(d)&&(void 0===Object.getOwnPropertyDescriptor(this,e.key).value?Object.getOwnPropertyDescriptor(this,e.key).set(e.args[1],b):Object.defineProperty(this,e.key,x.call(this,e.args[1],e.key)),e.type="postset",g(e)));return this}),remove:f(function(a,c){var b=
new l(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new m("remove",a,b,arguments);if(!0!==g(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the index: ",b.key," that does not exist on ",this),this;this.splice(b.key,b.args[1])}return this}),stringify:f(function(){var a=[];return JSON.stringify(this,function(c,b){if(w(b)||n(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:f(function(a,c,b){if(void 0!==h[a])for(var d=0,e=h[a].length;d<
e;d++)h[a][d](a,c,b);if(void 0!==h["*"])for(d=0,e=h["*"].length;d<e;d++)h["*"][d](a,c,b);return this}),subscribe:f(function(a,c){var b=new l(this,a,"subscribe",this[a],void 0,arguments),b=new m("subscribe",a,b,arguments);!0!==g(b)&&(void 0===h[b.key]&&(h[b.key]=[]),h[b.key].push(c));return this}),unsubscribe:f(function(a,c){var b=new l(this,a,"unsubscribe",this[a],void 0,arguments),b=new m("unsubscribe",a,b,arguments);if(!0!==g(b)&&void 0!==h[b.key]){var d=0,e=h[b.key].length;a:for(;d<e;d++)if(h[b.key][d].toString()===
c.toString()){h[b.key].splice(d,1);break a}}return this}),__kblisteners:f({}),__kbupdatelisteners:f({}),__kbparentlisteners:f({}),__kbparentupdatelisteners:f({}),__kbdatacreatelisteners:f([]),__kbdatadeletelisteners:f([]),addActionListener:f(function(a,c){-1!==Object.keys(y).indexOf(a)?y[a].push(c):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:f(function(a,c){if(-1!==Object.keys(y).indexOf(a))for(var b=0,d=y[a],e=d.length;b!==e;b++){if(d[b].toString()===
c.toString()){d.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this})});Object.defineProperties(v,{addDataListener:f(B("__kblisteners")),removeDataListener:f(C("__kblisteners")),addDataUpdateListener:f(B("__kbupdatelisteners")),removeDataUpdateListener:f(C("__kbupdatelisteners")),addDataCreateListener:f(B("__kbdatacreatelisteners")),removeDataCreateListener:f(C("__kbdatacreatelisteners")),addDataRemoveListener:f(B("__kbdatadeletelisteners")),removeDataRemoveListener:f(C("__kbdatadeletelisteners"))});
return v}}();window.define&&window.require?define([],function(){return z}):window.module&&(module.exports=z);return z}();
